import{R as E,u as F,b as v,r as N,f as x,j as e,c as u,y as d}from"./app-c9858a41.js";import{A as O,d as L,a as r}from"./AuthenticatedLayout-faf6dbbe.js";import{u as w,C as U,b as _,A as V}from"./AddModal-c2988986.js";import"./TextInput-d5346059.js";import{u as M}from"./index.esm-a0b73464.js";import{I as y}from"./InputText-59a976ea.js";import{b as h}from"./chunk-NXTXE2B3-1d879ef8.js";import"./methods-a1c28160.js";const T=["description","rate","actions"];function J({auth:b,duties:j}){const[o,i]=E.useState(null),{register:m,reset:n,setValue:g,handleSubmit:S,getValues:W,formState:C}=M(),p=F();v(t=>t.customers),N.useEffect(()=>{p(x())},[]);const{isOpen:D,onOpen:f,onOpenChange:c}=w(),A=async t=>{try{o?(await u.put(`/duties/${o}`,t),r.success("Duty Fees Updated Successfully"),d.visit("/duties"),n(),i(null)):(await u.post("/duties",t),d.visit("/duties"),r.success("Duty Fees Added Successfully")),c(),p(x()),n()}catch(s){console.error("Error:",s),r.error("Failed to Add/Update Duty Fees")}},I=t=>{i(t.id),Object.entries(t).forEach(([s,a])=>{g(s,a)}),f()},R=async t=>{var s,a;try{if(confirm("are you sure you want to delete this Record")){const l=await u.delete(`/duties/${t}`);r.success("Record Deleted"),d.visit("/duties")}else r.error("Request Cancelled")}catch(l){r("Somthing Went Wrong"),console.error("Error deleting:",((a=(s=l.response)==null?void 0:s.data)==null?void 0:a.error)||l.message)}};return e.jsxs(O,{user:b.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Customers"}),children:[e.jsx(U,{baseurl:"none",editRecord:I,onOpen:f,title:o?"Edit Duty Fees":"Add Duty Fees",handleDelete:R,canDelete:!0,tableObject:j,tableColumns:_,initialColumns:T}),e.jsx(V,{onOpenChange:c,isOpen:D,title:"Add Duty Fees",isSubmitting:!1,children:e.jsxs("form",{onSubmit:S(A),children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(y,{title:"Description",name:"description",register:m}),e.jsx(y,{name:"rate",register:m,title:"Rate"})]}),e.jsx(L,{className:"my-5"}),e.jsxs("div",{className:"buttonSection flex  justify-end gap-1",children:[e.jsx(h,{color:"danger",variant:"flat",onPress:()=>{n(),i(null),c()},children:"Close"}),e.jsx(h,{isLoading:C.isSubmitting,type:"submit",color:"primary",children:o?"Update":"Create"})]})]})})]})}export{J as default};
