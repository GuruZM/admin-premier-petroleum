import{u as A,b as P,r as T,o as c,j as e,c as p}from"./app-7212a6bf.js";import{A as q,d as v,a}from"./AuthenticatedLayout-b19f68c4.js";import{u as I,C as O,t as L,A as w,i as m}from"./AddModal-8c482402.js";import{u as D}from"./index.esm-120f0e97.js";import{s as R,l as x}from"./chunk-ZFWMN6TD-dd2af9e1.js";import{b}from"./chunk-NXTXE2B3-6ae725e6.js";import"./transition-994c12ae.js";import"./methods-eae04d3a.js";const V=["quantity","price","status","actions"];function z({auth:f}){const{register:n,reset:h,setValue:g,handleSubmit:y,getValues:d,formState:j}=D(),{isOpen:C,onOpen:S,onOpenChange:i}=I(),r=A(),{transportExpense:N}=P(t=>t.transport);T.useEffect(()=>{r(c())},[r]);const E=async t=>{p.post("/transport-expenses",t).then(s=>{a.success("Fuel Expense Added Successfully"),i(),r(c()),h()}).catch(s=>{console.log("err :",s),a.error("Something Went wrong")})},_=async t=>{var s,o;try{if(confirm("are you sure you want to delete this Record")){const l=await p.delete(`/transport-expenses/${t}`);console.log(l),a.success("Record Deleted"),r(c())}else a.error("Request Cancelled")}catch(l){a("Somthing Went Wrong"),console.error("Error deleting:",((o=(s=l.response)==null?void 0:s.data)==null?void 0:o.error)||l.message)}},u=()=>{const t=d("quantity"),s=d("price"),o=t*s;g("total",o)};return e.jsxs(q,{user:f.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Transport Expense"}),children:[e.jsx(O,{onOpen:S,title:"Transport Expenses",tableObject:N,tableColumns:L,initialColumns:V,handleDelete:_}),e.jsx(w,{onOpenChange:i,isOpen:C,title:"Add Transport Expense",isSubmitting:!1,children:e.jsx("form",{onSubmit:y(E),children:e.jsxs("div",{className:"flex flex-col space-y-8",children:[e.jsx(m,{style:{border:"none",outline:"none",":focus":{outline:"none"}},type:"number",labelPlacement:"outside",label:"Quantity",placeholder:"",className:"border-none outline-none  ",...n("quantity",{onChange:u}),startContent:e.jsx("span",{className:"text-default-400 text-small"})}),e.jsx(m,{style:{border:"none"},type:"number",labelPlacement:"outside",label:"Price",placeholder:"",className:"   ",...n("price",{required:!0,onChange:u}),startContent:e.jsx("span",{className:"text-default-400 text-small"})}),e.jsxs("div",{children:[e.jsx("small",{className:"font-semibold",children:"Total"}),e.jsx("input",{style:{border:"none"},type:"number",labelPlacement:"outside",label:"Total",readOnly:!0,className:"bg-gray-100 w-full p-2 rounded-xl",...n("total",{required:!0}),startContent:e.jsx("span",{className:"text-default-400 text-small"})})]}),e.jsxs(R,{labelPlacement:"outside",label:"Status",className:" ",startContent:"ðŸ‘¤",...n("status"),children:[e.jsx(x,{id:"pending",value:"pending",children:"Pending"},"pending"),e.jsx(x,{id:"paid",value:"paid",children:"Paid"},"paid")]}),e.jsx(v,{className:"my-5"}),e.jsxs("div",{className:"buttonSection flex  justify-end gap-1",children:[e.jsx(b,{color:"danger",variant:"flat",onPress:()=>{i()},children:"Close"}),e.jsx(b,{isLoading:j.isSubmitting,type:"submit",color:"primary",children:"Submit"})]})]})})})]})}export{z as default};
