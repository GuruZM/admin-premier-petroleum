import{R as E,u as F,b as v,r as N,f as d,j as e,c as m,y as x}from"./app-891da98c.js";import{A as O,d as L,a as r}from"./AuthenticatedLayout-68b6ad0b.js";import{u as w,C as U,b as _,A as V}from"./AddModal-11089aec.js";import"./TextInput-84c0ab39.js";import{u as M}from"./index.esm-69a93298.js";import{I as y}from"./InputText-49c06f40.js";import{b as h}from"./chunk-NXTXE2B3-fd409e13.js";import"./methods-a1c28160.js";const T=["description","rate"];function J({auth:b,duties:j}){const[o,i]=E.useState(null),{register:p,reset:n,setValue:g,handleSubmit:S,getValues:W,formState:C}=M(),c=F();v(s=>s.customers),N.useEffect(()=>{c(d())},[]);const{isOpen:D,onOpen:f,onOpenChange:l}=w(),A=async s=>{try{o?(await m.put(`/duties/${o}`,s),r.success("Duty Fees Updated Successfully"),x.visit("/duties"),n(),i(null)):(await m.post("/duties",s),x.visit("/duties"),r.success("Duty Fees Added Successfully")),l(),c(d()),n()}catch(t){console.error("Error:",t),r.error("Failed to Add/Update Duty Fees")}},I=s=>{i(s.id),Object.entries(s).forEach(([t,a])=>{g(t,a)}),f()},R=async s=>{var t,a;try{if(confirm("are you sure you want to delete this Record")){const u=await m.delete(`/customers/${s}`);r.success("Record Deleted"),c(d())}else r.error("Request Cancelled")}catch(u){r("Somthing Went Wrong"),console.error("Error deleting:",((a=(t=u.response)==null?void 0:t.data)==null?void 0:a.error)||u.message)}};return e.jsxs(O,{user:b.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Customers"}),children:[e.jsx(U,{baseurl:"none",editRecord:I,onOpen:f,title:o?"Edit Duty Fees":"Add Duty Fees",handleDelete:R,tableObject:j,tableColumns:_,initialColumns:T}),e.jsx(V,{onOpenChange:l,isOpen:D,title:"Add Duty Fees",isSubmitting:!1,children:e.jsxs("form",{onSubmit:S(A),children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(y,{title:"Description",name:"description",register:p}),e.jsx(y,{name:"rate",register:p,title:"Rate"})]}),e.jsx(L,{className:"my-5"}),e.jsxs("div",{className:"buttonSection flex  justify-end gap-1",children:[e.jsx(h,{color:"danger",variant:"flat",onPress:()=>{n(),i(null),l()},children:"Close"}),e.jsx(h,{isLoading:C.isSubmitting,type:"submit",color:"primary",children:o?"Update":"Create"})]})]})})]})}export{J as default};
