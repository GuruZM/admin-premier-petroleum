import{R as N,u as R,b as q,r as O,v as p,j as e,c as m}from"./app-adc48ae7.js";import{A as w,d as D,a as r}from"./AuthenticatedLayout-a111fece.js";import{u as L,C as _,t as W,A as U}from"./AddModal-71b132c2.js";import{u as V}from"./index.esm-4cef220c.js";import{r as $}from"./methods-a1c28160.js";import{I as x}from"./InputText-e79ba361.js";import{b}from"./chunk-NXTXE2B3-1caf704e.js";const M=["quantity","price","status","actions"];function J({auth:y,invoice_quantity:j}){const[a,c]=N.useState(null),{register:o,reset:E,setValue:u,handleSubmit:S,getValues:f,formState:C}=V(),T=t=>{c(t.id),Object.entries(t).forEach(([s,n])=>{u(s,n)}),g()},{isOpen:v,onOpen:g,onOpenChange:d}=L(),l=R(),{transportExpense:I}=q(t=>t.transport);O.useEffect(()=>{l(p())},[l]);const P=async t=>{try{if(a){const s=await m.put(`/transport-expenses/${a}`,t);console.log(s),r.success("Transport Expense Updated Successfully"),c(null)}else await m.post("/transport-expenses",t),r.success("Transport Expense Added Successfully");d(),l(p()),E()}catch(s){console.error("Error:",s),r.error("Something Went Wrong")}},A=async t=>{var s,n;try{if(confirm("are you sure you want to delete this Record")){const i=await m.delete(`/transport-expenses/${t}`);console.log(i),r.success("Record Deleted"),l(p())}else r.error("Request Cancelled")}catch(i){r("Somthing Went Wrong"),console.error("Error deleting:",((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.error)||i.message)}},h=()=>{const t=f("quantity"),s=f("price"),n=$(t*s,3);u("total",n)};return e.jsxs(w,{user:y.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Transport Expense"}),children:[e.jsx(_,{onOpen:g,editRecord:T,title:"Transport Expenses",baseurl:"none",tableObject:I,tableColumns:W,initialColumns:M,handleDelete:A}),e.jsx(U,{onOpenChange:d,isOpen:v,title:a?"Edit Transport Expense":"Add Transport Expense",isSubmitting:!1,children:e.jsx("form",{onSubmit:S(P),children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx("select",{labelPlacement:"outside",label:"Status",className:" bg-gray-100 flex-1 mt-1 p-2 rounded-xl w-full border-none outline-none focus:ring-0",startContent:"ðŸ‘¤",onChange:t=>u("quantity",t.target.value),children:j.map(t=>e.jsx("option",{id:"pending",value:t.quantity,children:t.invoice_number},"pending"))}),e.jsx(x,{type:"number",labelPlacement:"outside",title:"Quantity",register:o,name:"quantity",onChange:h}),e.jsx(x,{type:"number",step:".02",pattern:"^\\d*(\\.\\d{0,2})?$",labelPlacement:"outside",title:"Price",register:o,name:"price",onChange:h}),e.jsx(x,{title:"Total",readOnly:!0,register:o,name:"total"}),e.jsxs("select",{labelPlacement:"outside",label:"Status",className:" bg-gray-100 flex-1 mt-1 p-2 rounded-xl w-full border-none outline-none focus:ring-0",startContent:"ðŸ‘¤",...o("status"),children:[e.jsx("option",{id:"pending",value:"pending",children:"Pending"},"pending"),e.jsx("option",{id:"paid",value:"paid",children:"Paid"},"paid")]}),e.jsx(D,{className:"my-5"}),e.jsxs("div",{className:"buttonSection flex  justify-end gap-1",children:[e.jsx(b,{color:"danger",variant:"flat",onPress:()=>{c(null),d()},children:"Close"}),e.jsx(b,{isLoading:C.isSubmitting,type:"submit",color:"primary",children:a?"Update":"Create"})]})]})})})]})}export{J as default};
