import{u as O,b as h,r as _,h as p,j as e,c as y}from"./app-7f3bd20e.js";import{A as w,d as D,a as l}from"./AuthenticatedLayout-22b27255.js";import{u as F,C as L,f as P,A as R}from"./AddModal-b4bcb988.js";import{u as T}from"./index.esm-04912ad3.js";import{I as r}from"./InputText-b4a63474.js";import{b as f}from"./chunk-NXTXE2B3-46eaf97a.js";import"./transition-25a73fcd.js";import"./methods-6cb0a051.js";const W=["quantity","price","total","status","duty","actions"];function G({auth:g}){const{register:n,reset:b,handleSubmit:j,setValue:u,watch:i,getValues:d,formState:C}=T(),{isOpen:S,onOpen:E,onOpenChange:m}=F(),c=O();h(t=>t.suppliers);const{fuelExpenses:N}=h(t=>t.fuelExpenses);_.useEffect(()=>{c(p())},[c]);const x=()=>{console.log("watch :",i("quantity"));const t=i("quantity"),s=i("price"),a=i("exchange_rate"),o=t*s*a;u("total",o)},q=()=>{const t=d("quantity"),s=d("price"),a=t*s;u("total",a),v()},v=()=>{const s=18e4/d("quantity");u("duty",s)},I=async t=>{var s,a;try{if(confirm("are you sure you want to delete this Record")){const o=await y.delete(`/fuel-expenses/${t}`);l.success("Record Deleted"),c(p())}else l.error("Request Cancelled")}catch(o){l("Somthing Went Wrong"),console.error("Error deleting:",((a=(s=o.response)==null?void 0:s.data)==null?void 0:a.error)||o.message)}},A=async t=>{y.post("/fuel-expenses",t).then(s=>{console.log("res :",s),l.success("Fuel Expense Successfully"),m(),c(p()),b()}).catch(s=>{console.log("err :",s),l.error("Something Went Wrong")})};return e.jsxs(w,{user:g.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Fuel Expense"}),children:[e.jsx(L,{onOpen:E,title:"Fuel Expenses",handleDelete:I,tableObject:N,tableColumns:P,initialColumns:W}),e.jsx(R,{onOpenChange:m,isOpen:S,title:"Add Expense",isSubmitting:!1,children:e.jsx("form",{onSubmit:j(A),children:e.jsxs("div",{className:"flex flex-col space-y-8",children:[e.jsx(r,{style:{border:"none",outline:"none",":focus":{outline:"none"}},type:"number",title:"Quantity",className:"border-none outline-none  ",register:n,name:"quantity",onChange:q,startContent:e.jsx("span",{className:"text-default-400 text-small"})}),e.jsx(r,{style:{border:"none"},type:"number",title:"Price",placeholder:"",className:"   ",register:n,name:"price",onChange:x}),e.jsx(r,{style:{border:"none"},type:"number",title:"Exchange Rate",placeholder:"",className:"   ",register:n,name:"exchange_rate",onChange:x}),e.jsx("div",{children:e.jsx(r,{title:"Total",readOnly:!0,className:"bg-gray-100 w-full p-2 rounded-xl",register:n,name:"total",startContent:e.jsx("span",{className:"text-default-400 text-small"})})}),e.jsx("div",{children:e.jsx(r,{style:{border:"none"},type:"number",title:"Duty",register:n,name:"duty",readOnly:!0,startContent:e.jsx("span",{className:"text-default-400 text-small"})})}),e.jsxs("select",{labelPlacement:"outside",label:"Status",className:" bg-gray-100 flex-1 mt-1 p-2 rounded-xl w-full border-none outline-none focus:ring-0 ",startContent:"ðŸ‘¤",...n("status",{required:!0}),children:[e.jsx("option",{id:"pending",value:"pending",children:"Pending"},"pending"),e.jsx("option",{id:"paid",value:"paid",children:"Paid"},"paid")]}),e.jsx(D,{className:"my-5"}),e.jsxs("div",{className:"buttonSection flex  justify-end gap-1",children:[e.jsx(f,{color:"danger",variant:"flat",onPress:()=>{m()},children:"Close"}),e.jsx(f,{isLoading:C.isSubmitting,type:"submit",color:"primary",children:"Submit"})]})]})})})]})}export{G as default};
