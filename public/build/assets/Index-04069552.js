import{R as w,u as D,b as g,r as F,h as m,j as e,c as f}from"./app-c89cab4b.js";import{A as L,d as P,a as r}from"./AuthenticatedLayout-de4faf09.js";import{u as T,C as V,f as W,A as M}from"./AddModal-0367f929.js";import{u as Q}from"./index.esm-319e7f92.js";import{I as i}from"./InputText-0d641fe4.js";import{b}from"./chunk-NXTXE2B3-ffd1b7a1.js";import"./transition-3771e3c6.js";import"./methods-6cb0a051.js";const B=["quantity","price","total","status","duty","actions"];function X({auth:j}){const[n,C]=w.useState({}),{register:a,reset:S,handleSubmit:q,setValue:d,watch:c,getValues:p,formState:E}=Q({defaultValues:{quantity:n.quantity?n.quantity:0,price:n.price?n.price:0,exchange_rate:n.exchange_rate?n.exchange_rate:0,total:n.total?n.total:0,status:n.status?n.status:"pending",duty:0}}),N=t=>{console.log("obj :",t),C(t),y()},{isOpen:_,onOpen:y,onOpenChange:x}=T(),u=D();g(t=>t.suppliers);const{fuelExpenses:R}=g(t=>t.fuelExpenses);F.useEffect(()=>{u(m())},[u]);const h=()=>{console.log("watch :",c("quantity"));const t=c("quantity"),s=c("price"),o=c("exchange_rate"),l=t*s*o;d("total",l)},v=()=>{const t=p("quantity"),s=p("price"),o=t*s;d("total",o),I()},I=()=>{const s=18e4/p("quantity");d("duty",s)},A=async t=>{var s,o;try{if(confirm("are you sure you want to delete this Record")){const l=await f.delete(`/fuel-expenses/${t}`);r.success("Record Deleted"),u(m())}else r.error("Request Cancelled")}catch(l){r("Somthing Went Wrong"),console.error("Error deleting:",((o=(s=l.response)==null?void 0:s.data)==null?void 0:o.error)||l.message)}},O=async t=>{f.post("/fuel-expenses",t).then(s=>{console.log("res :",s),r.success("Fuel Expense Successfully"),x(),u(m()),S()}).catch(s=>{console.log("err :",s),r.error("Something Went Wrong")})};return e.jsxs(L,{user:j.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Fuel Expense"}),children:[e.jsx(V,{onOpen:y,editRecord:N,title:"Fuel Expenses",baseurl:"none",handleDelete:A,tableObject:R,tableColumns:W,initialColumns:B}),e.jsx(M,{onOpenChange:x,isOpen:_,title:"Add Expense",isSubmitting:!1,children:e.jsx("form",{onSubmit:q(O),children:e.jsxs("div",{className:"flex flex-col space-y-8",children:[e.jsx(i,{style:{border:"none",outline:"none",":focus":{outline:"none"}},type:"number",title:"Quantity",className:"border-none outline-none  ",register:a,name:"quantity",onChange:v,startContent:e.jsx("span",{className:"text-default-400 text-small"})}),e.jsx(i,{style:{border:"none"},type:"number",title:"Price",placeholder:"",className:"   ",register:a,name:"price",onChange:h}),e.jsx(i,{style:{border:"none"},type:"number",title:"Exchange Rate",placeholder:"",className:"   ",register:a,name:"exchange_rate",onChange:h}),e.jsx("div",{children:e.jsx(i,{title:"Total",readOnly:!0,className:"bg-gray-100 w-full p-2 rounded-xl",register:a,name:"total",startContent:e.jsx("span",{className:"text-default-400 text-small"})})}),e.jsx("div",{children:e.jsx(i,{style:{border:"none"},type:"number",title:"Duty",register:a,name:"duty",readOnly:!0,startContent:e.jsx("span",{className:"text-default-400 text-small"})})}),e.jsxs("select",{labelPlacement:"outside",label:"Status",className:" bg-gray-100 flex-1 mt-1 p-2 rounded-xl w-full border-none outline-none focus:ring-0 ",startContent:"ðŸ‘¤",...a("status",{required:!0}),children:[e.jsx("option",{id:"pending",value:"pending",children:"Pending"},"pending"),e.jsx("option",{id:"paid",value:"paid",children:"Paid"},"paid")]}),e.jsx(P,{className:"my-5"}),e.jsxs("div",{className:"buttonSection flex  justify-end gap-1",children:[e.jsx(b,{color:"danger",variant:"flat",onPress:()=>{x()},children:"Close"}),e.jsx(b,{isLoading:E.isSubmitting,type:"submit",color:"primary",children:"Submit"})]})]})})})]})}export{X as default};
