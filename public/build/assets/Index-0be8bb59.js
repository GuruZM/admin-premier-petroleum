import{u as g,b as S,r as A,f as m,j as e,c as d}from"./app-c89cab4b.js";import{A as I,d as P,Q as o}from"./AuthenticatedLayout-de4faf09.js";import{u as _,C as L,c as E,A as O,i as t}from"./AddModal-0367f929.js";import"./TextInput-7624af45.js";import{u as v}from"./index.esm-319e7f92.js";import{b as u}from"./chunk-NXTXE2B3-ffd1b7a1.js";import"./transition-3771e3c6.js";import"./methods-6cb0a051.js";const D=["firstname","tpin","lastname","company_name","contact","address","actions"];function $({auth:x}){const{register:s,reset:p,handleSubmit:f,getValues:R,formState:b}=v(),n=g(),{customers:h,status:F,error:q}=S(a=>a.customers);A.useEffect(()=>{n(m())},[]);const{isOpen:j,onOpen:C,onOpenChange:r}=_(),y=async a=>{d.post("/customers",a).then(l=>{o.success("Customer Added Successfully"),r(),n(m()),p()}).catch(l=>{console.log("err :",l),o.error("Failed to add Customer")})},N=async a=>{var l,i;try{if(confirm("are you sure you want to delete this Record")){const c=await d.delete(`/customers/${a}`);o.success("Record Deleted"),n(m())}else o.error("Request Cancelled")}catch(c){o("Somthing Went Wrong"),console.error("Error deleting:",((i=(l=c.response)==null?void 0:l.data)==null?void 0:i.error)||c.message)}};return e.jsxs(I,{user:x.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Customers"}),children:[e.jsx(L,{onOpen:C,title:"Customers",handleDelete:N,tableObject:h,tableColumns:E,initialColumns:D}),e.jsx(O,{onOpenChange:r,isOpen:j,title:"Add Customer",isSubmitting:!1,children:e.jsxs("form",{onSubmit:f(y),children:[e.jsxs("div",{className:"flex flex-col space-y-8",children:[e.jsx(t,{style:{border:"none",outline:"none",":focus":{outline:"none"}},labelPlacement:"outside",label:"Firstname",placeholder:"",className:"border-none outline-none  ",...s("firstname"),startContent:e.jsx("span",{className:"text-default-400 text-small"})}),e.jsx(t,{style:{border:"none"},labelPlacement:"outside",label:"Lastname",placeholder:"",className:"   ",...s("lastname"),startContent:e.jsx("span",{className:"text-default-400 text-small"})}),e.jsx(t,{style:{border:"none"},labelPlacement:"outside",label:"Company",placeholder:"",className:"   ",...s("company_name",{required:!0}),startContent:e.jsx("span",{className:"text-default-400 text-small"})}),e.jsx(t,{style:{border:"none"},labelPlacement:"outside",label:"Tpin",placeholder:"",className:"   ",...s("tpin"),startContent:e.jsx("span",{className:"text-default-400 text-small"})}),e.jsx(t,{style:{border:"none"},labelPlacement:"outside",label:"Contact",placeholder:"",className:"   ",...s("contact"),startContent:e.jsx("span",{className:"text-default-400 text-small"})}),e.jsx(t,{style:{border:"none",focus:"none"},labelPlacement:"outside",label:"Address",placeholder:"",className:"   ",...s("address"),startContent:e.jsx("span",{className:"text-default-400 text-small"})})]}),e.jsx(P,{className:"my-5"}),e.jsxs("div",{className:"buttonSection flex  justify-end gap-1",children:[e.jsx(u,{color:"danger",variant:"flat",onPress:()=>{r()},children:"Close"}),e.jsx(u,{isLoading:b.isSubmitting,type:"submit",color:"primary",children:"Submit"})]})]})})]})}export{$ as default};
