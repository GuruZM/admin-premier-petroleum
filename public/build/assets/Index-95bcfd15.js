import{u as A,b as P,r as T,o as p,j as e,c as m}from"./app-7f3bd20e.js";import{A as N,d as _,a as o}from"./AuthenticatedLayout-22b27255.js";import{u as v,C as O,t as q,A as L}from"./AddModal-b4bcb988.js";import{u as R}from"./index.esm-04912ad3.js";import{I as l}from"./InputText-b4a63474.js";import{b as x}from"./chunk-NXTXE2B3-46eaf97a.js";import"./transition-25a73fcd.js";import"./methods-6cb0a051.js";const w=["quantity","price","status","actions"];function $({auth:h}){const{register:a,reset:g,setValue:f,handleSubmit:b,getValues:c,formState:y}=R(),{isOpen:j,onOpen:S,onOpenChange:u}=v(),r=A(),{transportExpense:C}=P(t=>t.transport);T.useEffect(()=>{r(p())},[r]);const E=async t=>{m.post("/transport-expenses",t).then(s=>{o.success("Fuel Expense Added Successfully"),u(),r(p()),g()}).catch(s=>{console.log("err :",s),o.error("Something Went wrong")})},I=async t=>{var s,i;try{if(confirm("are you sure you want to delete this Record")){const n=await m.delete(`/transport-expenses/${t}`);console.log(n),o.success("Record Deleted"),r(p())}else o.error("Request Cancelled")}catch(n){o("Somthing Went Wrong"),console.error("Error deleting:",((i=(s=n.response)==null?void 0:s.data)==null?void 0:i.error)||n.message)}},d=()=>{const t=c("quantity"),s=c("price"),i=c("exchange_rate"),n=t*s*i;f("total",n)};return e.jsxs(N,{user:h.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Transport Expense"}),children:[e.jsx(O,{onOpen:S,title:"Transport Expenses",tableObject:C,tableColumns:q,initialColumns:w,handleDelete:I}),e.jsx(L,{onOpenChange:u,isOpen:j,title:"Add Transport Expense",isSubmitting:!1,children:e.jsx("form",{onSubmit:b(E),children:e.jsxs("div",{className:"flex flex-col space-y-8",children:[e.jsx(l,{type:"number",labelPlacement:"outside",title:"Quantity",register:a,name:"quantity",onChange:d}),e.jsx(l,{type:"number",labelPlacement:"outside",title:"Price",register:a,name:"price",onChange:d}),e.jsx(l,{type:"number",labelPlacement:"outside",title:"Exchange Rate",register:a,name:"exchange_rate",onChange:d}),e.jsx(l,{title:"Total",readOnly:!0,register:a,name:"total"}),e.jsxs("select",{labelPlacement:"outside",label:"Status",className:" bg-gray-100 flex-1 mt-1 p-2 rounded-xl w-full border-none outline-none focus:ring-0",startContent:"ðŸ‘¤",...a("status"),children:[e.jsx("option",{id:"pending",value:"pending",children:"Pending"},"pending"),e.jsx("option",{id:"paid",value:"paid",children:"Paid"},"paid")]}),e.jsx(_,{className:"my-5"}),e.jsxs("div",{className:"buttonSection flex  justify-end gap-1",children:[e.jsx(x,{color:"danger",variant:"flat",onPress:()=>{u()},children:"Close"}),e.jsx(x,{isLoading:y.isSubmitting,type:"submit",color:"primary",children:"Submit"})]})]})})})]})}export{$ as default};
