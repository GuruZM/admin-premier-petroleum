import{j as e,u as g,R as w,r as S,f as C,e as _,b as c,c as R,y as k}from"./app-9c18656a.js";import{A as P,d as m,Q as x}from"./AuthenticatedLayout-ed154445.js";import{i as t}from"./chunk-TC4QW7OA-29996412.js";import{P as I}from"./PlusIcon-cd102dba.js";import{u as A,a as D}from"./index.esm-98bebf31.js";import{m as G,b as d}from"./chunk-NXTXE2B3-5a1175ef.js";import"./transition-d454f600.js";function F({register:a,index:s,handleRemove:r,getValues:i}){return e.jsx("div",{children:e.jsxs("div",{className:" flex dark:text-white justify-between space-x-5 items-center",children:[e.jsxs("div",{className:" flex flex-wrap  w-full   ",children:[e.jsx("div",{className:" flex px-2   flex-1  flex-col items-start",children:e.jsx(t,{style:{border:"none",outline:"none",boxShadow:"none"},type:"text",label:"Order Ref.",labelPlacement:"outside",startContent:"ðŸ§®",...a(`items.${s}.order_ref`)})}),e.jsx("div",{className:" flex px-2   flex-1  flex-col items-start",children:e.jsx(t,{style:{border:"none",outline:"none",boxShadow:"none"},type:"number",label:"Qty.",labelPlacement:"outside",startContent:"ðŸ§®",...a(`items.${s}.quantity`)})}),e.jsx("div",{className:" flex-1 flex px-2   flex-col  ",children:e.jsx("div",{className:" flex px-2   flex-1  flex-col items-start",children:e.jsx(t,{style:{border:"none",outline:"none",boxShadow:"none"},type:"text",label:"Description.",labelPlacement:"outside",startContent:"ðŸ§®",...a(`items.${s}.description`)})})})]}),e.jsx("button",{className:"pt-8",onClick:()=>{r(s)},children:"ðŸ—‘ï¸"})]})})}function J({auth:a}){const s=g(),r=[{order_ref:"",description:"",quantity:0}],i=A({defaultValues:{reference:"",order_ref:"",received_by:"",checked_by:"",goods_condition:"",date:new Date().toISOString().slice(0,10),items:r}}),{fields:u,append:f,remove:b}=D({control:i.control,name:"items"}),{register:l,reset:h,setValue:V,getValues:p,handleSubmit:$}=i,y=n=>{b(n)},j=()=>{f({order_ref:"",description:"",quantity:0,id:""})},[v,q]=w.useState(!1),N=async n=>{R.post("/good-received",n).then(o=>{console.log("res :",o),x.success("Goods Recieved Added Successfully"),k.visit("/good-received")}).catch(o=>{console.log("err :",o),x.error("Failed to create a Goods Recieved")})};return S.useEffect(()=>{s(C()),s(_())},[s]),c(n=>n.customers.customers),c(n=>n.invoices.invoices),e.jsx(P,{user:a.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Goods Recieved"}),children:e.jsxs(G.div,{initial:{x:-500,opacity:0},animate:{opacity:1,x:0,transition:{type:"spring",stiffness:300,damping:40,duration:.4}},exit:{x:-700,transition:{duration:.2}},className:"  scrollbar-hide flex flex-col dark:text-white dark:bg-[#141625] bg-white my-5  md:pl-[50px] py-16 px-6 h-screen md:w-full md:rounded-r-3xl",children:[e.jsx("h1",{className:" font-semibold dark:text-white  text-3xl",children:"Goods Recieved"}),e.jsxs("form",{className:"overflow-y-scroll relative scrollbar-hide ",onSubmit:i.handleSubmit(N),children:[e.jsx("div",{className:"  ",children:e.jsxs("div",{className:" ",children:[e.jsx(m,{className:"my-5"}),e.jsx("div",{className:" grid grid-cols-2   gap-5   "}),e.jsxs("div",{className:" flex justify-center mb-5 space-x-5 items-center mt-8 ",children:[e.jsx("div",{className:" flex-1  ",children:e.jsx(t,{style:{border:"none",outline:"none",boxShadow:"none"},type:"text",label:"Reference",labelPlacement:"outside",startContent:"ðŸ—“ï¸",...l("reference")},"date")}),e.jsx("div",{className:"flex-1  ",children:e.jsx(t,{style:{border:"none",outline:"none",boxShadow:"none"},type:"text",label:"Order Number",labelPlacement:"outside",startContent:"ðŸ—“ï¸",...l("order_reference")},"text")})]}),e.jsx("div",{className:"flex-1 pt-3  ",children:e.jsx(t,{style:{border:"none",outline:"none",boxShadow:"none"},type:"date",label:"Date",labelPlacement:"outside",startContent:"ðŸ—“ï¸",...l("date")},"date")}),e.jsxs("div",{className:" flex justify-center mb-5 space-x-5 items-center mt-8 ",children:[e.jsx("div",{className:" flex-1  ",children:e.jsx(t,{style:{border:"none",outline:"none",boxShadow:"none"},type:"text",label:"Received By",labelPlacement:"outside",startContent:"ðŸ—“ï¸",...l("received_by")},"date")}),e.jsx("div",{className:"flex-1  ",children:e.jsx(t,{style:{border:"none",outline:"none",boxShadow:"none"},type:"text",label:"Checked By",labelPlacement:"outside",startContent:"ðŸ—“ï¸",...l("checked_by")},"text")})]}),e.jsx("div",{className:"flex-1 pt-3  ",children:e.jsx(t,{style:{border:"none",outline:"none",boxShadow:"none"},type:"textarea",label:"Goods Condition",labelPlacement:"outside",startContent:"ðŸ—“ï¸",...l("goods_condition")},"date")}),e.jsx("h2",{className:" font-medium text-gray-500 mt-10 ",children:"Item List"}),e.jsx(m,{className:"my-5"}),u.map(({id:n},o)=>e.jsx("div",{className:" border-b pb-2 border-gray-300 mb-4 ",children:e.jsx(F,{handleRemove:y,getValues:p,control:i.control,index:o,name:`items.${o}.name`,register:l},o)},o)),e.jsx("div",{className:"flex flex-col   items-end",children:e.jsx("input",{type:"hidden",...l("issued_by",{value:a.user.id})})})]})}),e.jsxs("div",{className:"sticky space-y-4",children:[e.jsx(d,{onClick:()=>{j()},className:"  w-full mt-4",color:"primary",endContent:e.jsx(I,{}),children:"Add New Item"}),e.jsxs("div",{className:" flex  justify-between",children:[e.jsx("div",{children:e.jsx(d,{onClick:()=>{h()},className:"  ",color:"primary",children:"Discard"})}),e.jsx("div",{children:e.jsx(d,{className:"  ",color:"primary",type:"submit",isLoading:v,children:"Submit"})})]})]})]})]},"createDeliverynote-sidebar")})}export{J as default};
