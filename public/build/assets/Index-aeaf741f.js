import{R as N,u as R,b as q,r as O,v as p,j as e,c as m}from"./app-188785ec.js";import{A as w,d as D,a as r}from"./AuthenticatedLayout-bd273315.js";import{u as L,C as _,t as W,A as U}from"./AddModal-91c0c9bd.js";import{u as V}from"./index.esm-750e1807.js";import{r as $}from"./methods-a1c28160.js";import{I as x}from"./InputText-23cc3ce1.js";import{b as y}from"./chunk-NXTXE2B3-645217aa.js";const M=["quantity","price","status","actions"];function J({auth:j,invoice_quantity:E}){const[a,c]=N.useState(null),{register:o,reset:S,setValue:u,handleSubmit:C,getValues:g,formState:T}=V(),v=t=>{c(t.id),Object.entries(t).forEach(([s,n])=>{u(s,n)}),f()},{isOpen:I,onOpen:f,onOpenChange:d}=L(),l=R(),{transportExpense:h}=q(t=>t.transport);console.log("transportExpense :",h),O.useEffect(()=>{l(p())},[l]);const P=async t=>{try{if(a){const s=await m.put(`/transport-expenses/${a}`,t);console.log(s),r.success("Transport Expense Updated Successfully"),c(null)}else await m.post("/transport-expenses",t),r.success("Transport Expense Added Successfully");d(),l(p()),S()}catch(s){console.error("Error:",s),r.error("Something Went Wrong")}},A=async t=>{var s,n;try{if(confirm("are you sure you want to delete this Record")){const i=await m.delete(`/transport-expenses/${t}`);console.log(i),r.success("Record Deleted"),l(p())}else r.error("Request Cancelled")}catch(i){r("Somthing Went Wrong"),console.error("Error deleting:",((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.error)||i.message)}},b=()=>{const t=g("quantity"),s=g("price"),n=$(t*s,3);u("total",n)};return e.jsxs(w,{user:j.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Transport Expense"}),children:[e.jsx(_,{onOpen:f,editRecord:v,title:"Transport Expenses",baseurl:"none",tableObject:h,tableColumns:W,initialColumns:M,handleDelete:A}),e.jsx(U,{onOpenChange:d,isOpen:I,title:a?"Edit Transport Expense":"Add Transport Expense",isSubmitting:!1,children:e.jsx("form",{onSubmit:C(P),children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx("select",{labelPlacement:"outside",label:"Status",className:" bg-gray-100 flex-1 mt-1 p-2 rounded-xl w-full border-none outline-none focus:ring-0",startContent:"ðŸ‘¤",onChange:t=>u("quantity",t.target.value),children:E.map(t=>e.jsx("option",{id:"pending",value:t.quantity,children:t.invoice_number},"pending"))}),e.jsx(x,{type:"number",labelPlacement:"outside",title:"Quantity",register:o,name:"quantity",onChange:b}),e.jsx(x,{type:"number",step:"any",pattern:"^\\d*(\\.\\d+)?$",labelPlacement:"outside",title:"Price",register:o,name:"price",onChange:b}),e.jsx(x,{title:"Total",readOnly:!0,register:o,name:"total"}),e.jsxs("select",{labelPlacement:"outside",label:"Status",className:" bg-gray-100 flex-1 mt-1 p-2 rounded-xl w-full border-none outline-none focus:ring-0",startContent:"ðŸ‘¤",...o("status"),children:[e.jsx("option",{id:"pending",value:"pending",children:"Pending"},"pending"),e.jsx("option",{id:"paid",value:"paid",children:"Paid"},"paid")]}),e.jsx(D,{className:"my-5"}),e.jsxs("div",{className:"buttonSection flex  justify-end gap-1",children:[e.jsx(y,{color:"danger",variant:"flat",onPress:()=>{c(null),d()},children:"Close"}),e.jsx(y,{isLoading:T.isSubmitting,type:"submit",color:"primary",children:a?"Update":"Create"})]})]})})})]})}export{J as default};
