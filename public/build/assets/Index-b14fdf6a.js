import{R,u as v,b as L,r as N,f as h,j as e,c as u,y as m}from"./app-4e6fcf28.js";import{A as O,d as _,a}from"./AuthenticatedLayout-d5372de6.js";import{u as D,C as w,c as U,A as V}from"./AddModal-24bdef7e.js";import"./TextInput-c8b5a21b.js";import{u as z}from"./index.esm-fbd9a623.js";import{I as f}from"./InputText-2f418a09.js";import{b as g}from"./chunk-NXTXE2B3-e6e7ffa8.js";import"./methods-a1c28160.js";const M=["logistics","clearing_fee","zcsa","actions"];function H({auth:y,clearanceFees:C}){const[r,n]=R.useState(null),{register:o,reset:l,setValue:b,handleSubmit:j,getValues:T,formState:S}=z(),p=v();L(s=>s.customers),N.useEffect(()=>{p(h())},[]);const{isOpen:A,onOpen:x,onOpenChange:i}=D(),F=async s=>{try{r?(await u.put(`/clearance-fees/${r}`,s),a.success("Clearance Fee Updated Successfully"),l(),n(null)):(await u.post("/clearance-fees",s),a.success("Clearance Fee Added Successfully"),m.visit("/clearance-fees")),i(),p(h()),l()}catch(t){console.error("Error:",t),a.error("Failed to Add/Update Clearance Fee")}},I=s=>{n(s.id),Object.entries(s).forEach(([t,c])=>{b(t,c)}),x()},E=async s=>{var t,c;try{if(confirm("are you sure you want to delete this Record")){const d=await u.delete(`/clearance-fees/${s}`);m.visit("/clearance-fees"),a.success("Record Deleted"),m.visit("/clearance-fees")}else a.error("Request Cancelled")}catch(d){a("Somthing Went Wrong"),console.error("Error deleting:",((c=(t=d.response)==null?void 0:t.data)==null?void 0:c.error)||d.message)}};return e.jsxs(O,{user:y.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Clearance Fee"}),children:[e.jsx(w,{baseurl:"none",editRecord:I,onOpen:x,title:r?"Edit Clearance Fee":"Add Clearance Fee",handleDelete:E,canDelete:!0,tableObject:C,tableColumns:U,initialColumns:M}),e.jsx(V,{onOpenChange:i,isOpen:A,title:"Add Clearance Fee",isSubmitting:!1,children:e.jsxs("form",{onSubmit:j(F),children:[e.jsxs("div",{className:"flex flex-col space-y-8",children:[e.jsx(f,{title:"Logistics",name:"logistics",type:"number",register:o}),e.jsx(f,{type:"number",name:"clearing_fee",register:o,title:"Clearing Fee"}),e.jsx(f,{type:"number",name:"zcsa",register:o,title:"ZCSA"})]}),e.jsx(_,{className:"my-5"}),e.jsxs("div",{className:"buttonSection flex  justify-end gap-1",children:[e.jsx(g,{color:"danger",variant:"flat",onPress:()=>{l(),n(null),i()},children:"Close"}),e.jsx(g,{isLoading:S.isSubmitting,type:"submit",color:"primary",children:r?"Update":"Create"})]})]})})]})}export{H as default};
