import{u as O,b as p,r as w,h as m,j as e,c as x}from"./app-638f0c6b.js";import{A as D,d as I,a as l}from"./AuthenticatedLayout-5339be2c.js";import{u as F,C as L,f as R,A as T,i as f}from"./AddModal-60ab74d5.js";import{u as W}from"./index.esm-4b5499e8.js";import{s as V,l as y}from"./chunk-ZFWMN6TD-99e1e764.js";import{b as h}from"./chunk-NXTXE2B3-ef2cd26c.js";import"./transition-901d5b46.js";import"./methods-6cb0a051.js";const M=["quantity","price","total","status","duty","actions"];function J({auth:b}){const{register:n,reset:g,handleSubmit:j,setValue:i,watch:o,getValues:u,formState:C}=W(),{isOpen:N,onOpen:q,onOpenChange:c}=F(),r=O();p(t=>t.suppliers);const{fuelExpenses:S}=p(t=>t.fuelExpenses);w.useEffect(()=>{r(m())},[r]);const E=()=>{console.log("watch :",o("quantity"));const t=o("quantity"),s=o("price"),a=t*s;console.log("total :",o("total")),i("total",a)},_=()=>{const t=u("quantity"),s=u("price"),a=t*s;i("total",a),v()},v=()=>{const s=18e4/u("quantity");i("duty",s)},P=async t=>{var s,a;try{if(confirm("are you sure you want to delete this Record")){const d=await x.delete(`/fuel-expenses/${t}`);l.success("Record Deleted"),r(m())}else l.error("Request Cancelled")}catch(d){l("Somthing Went Wrong"),console.error("Error deleting:",((a=(s=d.response)==null?void 0:s.data)==null?void 0:a.error)||d.message)}},A=async t=>{x.post("/fuel-expenses",t).then(s=>{console.log("res :",s),l.success("Fuel Expense Successfully"),c(),r(m()),g()}).catch(s=>{console.log("err :",s),l.error("Something Went Wrong")})};return e.jsxs(D,{user:b.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Fuel Expense"}),children:[e.jsx(L,{onOpen:q,title:"Fuel Expenses",handleDelete:P,tableObject:S,tableColumns:R,initialColumns:M}),e.jsx(T,{onOpenChange:c,isOpen:N,title:"Add Expense",isSubmitting:!1,children:e.jsx("form",{onSubmit:j(A),children:e.jsxs("div",{className:"flex flex-col space-y-8",children:[e.jsx(f,{style:{border:"none",outline:"none",":focus":{outline:"none"}},type:"number",labelPlacement:"outside",label:"Quantity",placeholder:"",className:"border-none outline-none  ",...n("quantity",{onChange:_}),startContent:e.jsx("span",{className:"text-default-400 text-small"})}),e.jsx(f,{style:{border:"none"},type:"number",labelPlacement:"outside",label:"Price",placeholder:"",className:"   ",...n("price",{required:!0,onChange:E}),startContent:e.jsx("span",{className:"text-default-400 text-small"})}),e.jsxs("div",{children:[e.jsx("small",{className:"font-semibold",children:"Total"}),e.jsx("input",{style:{border:"none"},type:"number",labelPlacement:"outside",label:"Total",readOnly:!0,className:"bg-gray-100 w-full p-2 rounded-xl",...n("total",{required:!0}),startContent:e.jsx("span",{className:"text-default-400 text-small"})})]}),e.jsxs("div",{children:[e.jsx("small",{className:"font-semibold",children:"Duty"}),e.jsx("input",{style:{border:"none"},type:"number",placeholder:"",className:"bg-gray-100 w-full p-2 rounded-xl",readOnly:!0,...n("duty",{required:!0}),startContent:e.jsx("span",{className:"text-default-400 text-small"})})]}),e.jsxs(V,{labelPlacement:"outside",label:"Status",className:" ",startContent:"ðŸ‘¤",...n("status",{required:!0}),children:[e.jsx(y,{id:"pending",value:"pending",children:"Pending"},"pending"),e.jsx(y,{id:"paid",value:"paid",children:"Paid"},"paid")]}),e.jsx(I,{className:"my-5"}),e.jsxs("div",{className:"buttonSection flex  justify-end gap-1",children:[e.jsx(h,{color:"danger",variant:"flat",onPress:()=>{c()},children:"Close"}),e.jsx(h,{isLoading:C.isSubmitting,type:"submit",color:"primary",children:"Submit"})]})]})})})]})}export{J as default};
